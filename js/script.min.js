function init(){myMap=new ymaps.Map("yandex-map",{center:[55.68697956906804,37.52965449999998],zoom:17},{searchControlProvider:"yandex#search"}),myMap.geoObjects.add(new ymaps.Placemark([55.68712503147963,37.52969741534421]))}var link=document.querySelector(".btn-popup"),popup=document.querySelector(".popup"),close=popup.querySelector(".close"),form=popup.querySelector("form"),introduce=popup.querySelector("[name=name-post]"),email=popup.querySelector("[name=email-post]"),letter=popup.querySelector("[name=text-post]"),storageIntroduce=localStorage.getItem("introduce"),storageEmail=localStorage.getItem("email");link.addEventListener("click",function(a){a.preventDefault(),popup.classList.add("popup--show"),storageIntroduce&&storageEmail?(introduce.value=storageIntroduce,email.value=storageEmail,letter.focus()):introduce.focus()}),close.addEventListener("click",function(a){a.preventDefault(),popup.classList.remove("popup--show"),popup.classList.remove("popup-error"),introduce.classList.remove("popup-invalid"),email.classList.remove("popup-invalid"),letter.classList.remove("popup-invalid")}),form.addEventListener("submit",function(a){introduce.value?localStorage.setItem("introduce",introduce.value):(a.preventDefault(),introduce.classList.add("popup-invalid")),email.value?localStorage.setItem("email",email.value):(a.preventDefault(),email.classList.add("popup-invalid")),letter.value||(a.preventDefault(),letter.classList.add("popup-invalid")),introduce.value&&email.value&&letter.value||(a.preventDefault(),popup.classList.remove("popup-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup-error"))}),window.addEventListener("keydown",function(a){27===a.keyCode&&popup.classList.contains("popup--show")&&(popup.classList.remove("popup--show"),popup.classList.remove("popup-error"),introduce.classList.remove("popup-invalid"),email.classList.remove("popup-invalid"),letter.classList.remove("popup-invalid"))});var mapOpen=document.querySelector(".map-open-js"),mapPopup=document.querySelector(".popup-map"),mapClose=mapPopup.querySelector(".close");mapOpen.addEventListener("click",function(a){a.preventDefault(),mapPopup.classList.add("popup-map--show")}),mapClose.addEventListener("click",function(a){a.preventDefault(),mapPopup.classList.remove("popup-map--show")}),window.addEventListener("keydown",function(a){27===a.keyCode&&mapPopup.classList.contains("popup-map--show")&&mapPopup.classList.remove("popup-map--show")});var myMap;ymaps.ready(init);
